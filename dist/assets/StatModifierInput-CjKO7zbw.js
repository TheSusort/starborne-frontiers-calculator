import{k as t,j as o,m as j,I as A,B as v,C as I}from"./ui-D2YqbPcu.js";import"./vendor-BhvhDhpY.js";const k=({stats:i,onChange:c,maxStats:T,allowedStats:p,excludedStats:r=[]})=>{const y=(e,a,n)=>{var m;const s=[...i],l=s[e];if(a==="name"){const C=(((m=p==null?void 0:p[n])==null?void 0:m.allowedTypes)||t[n].allowedTypes).filter(N=>!(r!=null&&r.some(b=>b.name===n&&b.type===N)))[0];s[e]={...l,name:n,type:C}}else a==="type"?r!=null&&r.some(f=>f.name===l.name&&f.type===n)||(s[e]={...l,type:n}):s[e]={...l,[a]:a==="value"?Number(n):n};c(s)},g=()=>{var e;if(i.length<T){const a=Object.keys(p||t)[0],n=(((e=p==null?void 0:p[a])==null?void 0:e.allowedTypes)||["flat"])[0],s={name:a,type:n,value:0};c([...i,s])}},u=e=>{const a=i.filter((n,s)=>s!==e);c(a)},h=Object.entries(p||t).filter(([e,a])=>{var n;return((n=a.allowedTypes)==null?void 0:n.length)&&e!=="healModifier"}).map(([e,a])=>{var s;const n=(s=a.allowedTypes)==null?void 0:s.filter(l=>!r.some(m=>m.name===e&&m.type===l));return{value:e,label:t[e].label,allowedTypes:n==null?void 0:n.map(l=>({value:l,label:l.charAt(0).toUpperCase()+l.slice(1)}))}}).filter(e=>e.allowedTypes&&e.allowedTypes.length>0);return o.jsxs("div",{className:"space-y-4",children:[i.map((e,a)=>{var n;return o.jsxs("div",{className:"flex gap-4 items-end w-full",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 items-end w-full",children:[o.jsx(j,{label:"Stat",value:e.name,onChange:s=>y(a,"name",s),options:h,className:"w-full"}),o.jsx(A,{type:"number",label:"Value",value:e.value,onChange:s=>y(a,"value",s.target.value),className:"w-full"}),o.jsx(j,{label:"Type",value:e.type,onChange:s=>y(a,"type",s),options:((n=h.find(s=>s.value===e.name))==null?void 0:n.allowedTypes)||[],className:"w-full"})]}),o.jsx(v,{"aria-label":"Remove stat",variant:"danger",onClick:()=>u(a),children:o.jsx(I,{})})]},a)}),i.length<T&&o.jsx(v,{variant:"secondary",onClick:g,type:"button","aria-label":"Add stat",children:"Add Stat"})]})};export{k as S};
