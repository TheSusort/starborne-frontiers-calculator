import{O as S}from"./ui-D2YqbPcu.js";import{c as d}from"./useShips-RXMfKXLW.js";function p(e){return 88.3505*Math.exp(-Math.pow((4.5552-Math.log10(e))/1.3292,2))}function s(e,c){const t=p(c);return e*(100/(100-t))}function m(e){const t=1+(e.crit>=100?1:e.crit/100)*((e.critDamage||0)/100);return(e.attack||0)*t}function b(e,c,t,o){let i=0;for(const r of c){const a=e[r.stat]||0;if(r.minLimit&&a<r.minLimit){const l=(r.minLimit-a)/r.minLimit;i+=l*100}if(r.maxLimit&&a>r.maxLimit){const l=(a-r.maxLimit)/r.maxLimit;i+=l*100}}let n=0;if(t)switch(t){case"Attacker":n=M(e);break;case"Defender":n=k(e);break;case"Debuffer":n=D(e);break;case"Supporter":n=L(e);break;case"Supporter(Buffer)":n=g(e,o);break}else n=h(e,c);return Math.max(0,n*(1-i/100))}function h(e,c){let t=0;return c.forEach((o,i)=>{const n=e[o.stat]||0,r=S[o.stat]||1,a=n/r,l=Math.pow(2,c.length-i-1);t+=a*o.weight*l}),t}function M(e){return m(e)}function k(e){return s(e.hp||0,e.defence||0)}function D(e){const c=e.hacking||0;return m(e)*c}function L(e){const c=(e.hp||0)*.15,o=1+(e.crit>=100?1:(e.crit||0)/100)*((e.critDamage||0)/100),i=e.healModifier||0;return c*o*(1+i/100)}function g(e,c){const t=e.speed||0,o=(c==null?void 0:c.BOOST)||0,i=s(e.hp||0,e.defence||0);let n;t<=180?n=t*10:n=180*10+Math.sqrt(t-180)*20;let r=0;o>=4&&(r=3e3);const a=Math.sqrt(i)*2;return n+r+a}function H(e,c,t,o,i,n){const r=d(e.baseStats,c,o,e.refits,e.implants,i(e.type)),a={};return Object.values(c).forEach(u=>{if(!u)return;const f=o(u);f!=null&&f.setBonus&&(a[f.setBonus]=(a[f.setBonus]||0)+1)}),b(r.final,t,n,a)}export{H as a,p as b,b as c};
