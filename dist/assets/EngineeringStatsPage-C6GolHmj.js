import{e as p,j as e,m as j,B as x,E as v,C as E,u as S,P as T,h as N}from"./ui-D2YqbPcu.js";import{a as g}from"./vendor-BhvhDhpY.js";import{S as w}from"./StatModifierInput-CjKO7zbw.js";import{u as y}from"./useEngineeringStats-BBMilB8n.js";import{S as C}from"./StatDisplay-zLjdPrVG.js";import"./useStorage-6AZ-_ceW.js";import"./firebaseStorage-B0eyI6ev.js";const F=({initialStats:s,onSubmit:o})=>{const[n,t]=g.useState((s==null?void 0:s.shipType)||Object.keys(p)[0]),[i,l]=g.useState((s==null?void 0:s.stats)||[]),{getAllAllowedStats:d,engineeringStats:h}=y(),a=Object.entries(p).filter(([r])=>r==="SUPPORTER_BUFFER"?!1:(s==null?void 0:s.shipType)===r||!h.stats.some(u=>u.shipType===r)).map(([r,u])=>({value:r,label:u.name})),c=()=>{t(Object.keys(p)[0]),l([])};g.useEffect(()=>{s?(t(s.shipType),l(s.stats)):c()},[s]);const m=r=>{l(r)},f=r=>{r.preventDefault(),o({shipType:n,stats:i}),s||c()};return e.jsxs("form",{onSubmit:f,className:"bg-dark p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{label:"Ship Type",value:n,onChange:r=>t(r),options:a})}),e.jsx(w,{stats:i,onChange:m,maxStats:5,allowedStats:d()}),e.jsx(x,{"aria-label":"Save engineering stats",type:"submit",className:"mt-6",variant:"primary",children:"Save Engineering Stats"})]})},P=({stats:s,onEdit:o,onDelete:n})=>s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400 bg-dark-lighter border-2 border-dashed",children:"No engineering stats found."}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Existing Engineering Stats"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(t=>e.jsxs("div",{className:"bg-dark mb-4 border border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium",children:p[t.shipType].name}),e.jsx(x,{"aria-label":"Edit engineering stats",variant:"secondary",size:"sm",className:"ms-auto me-2",onClick:()=>{o(t),window.scrollTo({top:0,behavior:"smooth"})},children:e.jsx(v,{})}),e.jsx(x,{"aria-label":"Delete engineering stats",variant:"danger",size:"sm",onClick:()=>n(t.shipType),children:e.jsx(E,{})})]}),e.jsxs("div",{className:"p-4 space-y-4 flex-grow",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Engineering Stats"}),e.jsx("div",{className:"space-y-2",children:e.jsx(C,{stats:t.stats})})]})]},t.shipType))})]}),V=()=>{const{engineeringStats:s,saveEngineeringStats:o}=y(),[n,t]=g.useState(),[i,l]=g.useState(!1),{addNotification:d}=S(),h=a=>{const c={stats:s.stats.filter(m=>m.shipType!==a.shipType).concat(a)};o(c),n?d("success","Engineering stats updated successfully"):d("success","Engineering stats added successfully"),t(void 0)},b=a=>{const c={stats:s.stats.filter(m=>m.shipType!==a)};o(c),(n==null?void 0:n.shipType)===a&&t(void 0),d("success","Engineering stats deleted successfully")};return e.jsxs(T,{title:"Engineering Stats Management",description:"Manage your engineering stats.",action:{label:i?"Hide Form":"Create",onClick:()=>{n&&t(void 0),l(!i)},variant:i?"secondary":"primary"},children:[e.jsx(N,{isVisible:i||!!n,children:e.jsx(F,{initialStats:n,onSubmit:a=>{h(a),window.scrollTo({top:0,behavior:"smooth"})}})}),e.jsx("div",{className:"space-y-4 ",children:e.jsx(P,{stats:s.stats,onEdit:a=>{t(a),window.scrollTo({top:0,behavior:"smooth"})},onDelete:b})})]})};export{V as EngineeringStatsPage,V as default};
