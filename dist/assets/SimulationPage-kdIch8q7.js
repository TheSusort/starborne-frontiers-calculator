import{j as e,m as j,e as p,B as y,P as b}from"./ui-D2YqbPcu.js";import{a as c,f as R}from"./vendor-BhvhDhpY.js";import{a as k,u as v,c as w}from"./useShips-RXMfKXLW.js";import{u as I}from"./useEngineeringStats-BBMilB8n.js";import{S as P,r as E}from"./SimulationResults-DawwZDmL.js";import{S as N}from"./ShipSelector-BxvrfkTU.js";import"./useStorage-6AZ-_ceW.js";import"./firebaseStorage-B0eyI6ev.js";import"./scoring-AiKeAj3b.js";import"./ShipDisplay-ApR9I5gC.js";const F=({selectedShip:s,selectedRole:n,onShipSelect:l,onRoleSelect:i,onRunSimulation:o})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold ",children:"Settings"}),e.jsx(N,{onSelect:l,selected:s,variant:"compact",sortDirection:"desc"}),e.jsx("div",{className:"p-4 bg-dark space-y-2",children:e.jsx(j,{label:"Ship Role",options:Object.values(p).map(a=>({value:a.name,label:`${a.name} (${a.description})`})),value:n,onChange:a=>i(a)})}),e.jsx(y,{"aria-label":"Run Simulation",variant:"primary",onClick:o,disabled:!s,fullWidth:!0,children:"Run Simulation"}),e.jsx(T,{})]}),T=()=>e.jsxs("p",{className:"text-gray-400 text-sm",children:["This simulates scenarios with the selected ship and gear.",e.jsx("br",{}),"It will only use 100% damage hits, no ship specific attacks are used.",e.jsx("br",{}),"For defenders, it will take hits from an enemy with 15000 attack and 170 security.",e.jsx("br",{}),"For debuffers, it will also try to hack an enemy with 170 security.",e.jsx("br",{}),"For supporters, it will heal an ally with using 15% of their max HP."]}),W=()=>{const{getShipById:s}=k(),[n,l]=c.useState(""),[i,o]=c.useState("Attacker"),{getGearPiece:a}=v(),{getEngineeringStatsForShipType:h}=I(),[u,m]=c.useState(null),[d]=R();c.useEffect(()=>{const t=d.get("shipId");if(t){const r=s(t);r&&(l(t),o(p[r.type].name))}},[d,s]);const S=()=>{const t=s(n);if(!t)return;const r=w(t.baseStats,t.equipment,a,t.refits,t.implants,h(t.type)),g=E(r.final,i);m(g)},f=t=>{o(t),m(null)},x=s(n);return e.jsx(b,{title:"Simulation",description:"Simulate simplified attacks, hacks, heals, and defence with your ships and gear.",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{selectedShip:x||null,selectedRole:i,onShipSelect:t=>l(t.id),onRoleSelect:f,onRunSimulation:S}),u&&e.jsx(P,{currentSimulation:u,role:i})]})})};export{W as SimulationPage,W as default};
